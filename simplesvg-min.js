// simpleSVG, Copyright (c) 2013 Alexander Ivanov. This code is distributed under the MIT License. http://opensource.org/licenses/mit-license.php
(function(e,t){this.simpleSVG=function(e,t,r){n.prototype.that=this;if(i(e,"string"))e=document.getElementById(e);this.object=e;this.width=i(t,"number")?t:this.object.clientWidth;this.height=i(r,"number")?r:this.object.clientHeight;this.ns="http://www.w3.org/2000/svg";this.createSurface();this.pool={};this.poolIndex=0};var n=function(e){this[0]=i(e,"string")?this.that.pool[e]:e;return this};var r=function(e){var t=0;while((t=e.indexOf("-"))!=-1)e=e.substr(0,t)+e.substr(t+1,1).toUpperCase()+e.substr(t+2);return e};var i=function(e,t){if(typeof t=="undefined")t="undefined";return typeof e==t};var s=function(e){if(e.length==0)return"";var t,n="",r=i(e[0],"number");for(t=0;t<e.length;++t){n+=(n==""?"M":"L")+(r?e[t]:e[t][0])+","+(r?e[++t]:e[t][1])}return n};this.simpleSVG.prototype.createSurface=function(){this.surface=document.createElementNS(this.ns,"svg");this.surface.setAttribute("width",this.width);this.surface.setAttribute("height",this.height);this.object.appendChild(this.surface)};this.simpleSVG.prototype.destroy=function(){this.pool={};this.poolIndex=0;this.object.removeChild(this.surface)};this.simpleSVG.prototype.clear=function(){this.destroy();this.createSurface()};this.simpleSVG.prototype.node=function(e){function simpleSVGnode(a) {return a};return new simpleSVGnode(e)};n.prototype.set=function(e,t){this[0].setAttribute(e,t);return this};n.prototype.stroke=function(e){return this.set("stroke",e)};n.prototype.fill=function(e){return this.set("fill",e)};n.prototype.css=function(e,t){if(i(e,"string")){e=r(e);this[0].style[e]=t}else{for(var n in e){this[0].style[r(n)]=e[n]}}return this};n.prototype.hover=function(e,t){if(e)this[0].onmouseover=e;if(t)this[0].onmouseout=t;return this};n.prototype.click=function(e,t){if(e)this[0].onmousedown=e;if(t)this[0].onmouseup=t;return this};this.simpleSVG.prototype.del=function(e){this.surface.removeChild(this.pool[e]);delete this.pool[e]};this.simpleSVG.prototype.add=function(e,t){if(!i(t,"string"))t="unnamedObject"+ ++this.poolIndex;if(i(this.pool[t]))this.surface.appendChild(e);else this.surface.replaceChild(e,this.pool[t]);this.pool[t]=e;function simpleSVGnode(a) {return a};return new simpleSVGnode(this.pool[t])};this.simpleSVG.prototype.path=function(e,t){var n=s(e);var r=document.createElementNS(this.ns,"path");r.setAttribute("d",n);r.setAttribute("fill","none");r.setAttribute("stroke","#000000");return this.add(r,t)};this.simpleSVG.prototype.text=function(e,t,n,r){var i=document.createElementNS(this.ns,"text");i.setAttribute("x",e);i.setAttribute("y",t);i.appendChild(document.createTextNode(n));return this.add(i,r)};this.simpleSVG.prototype.rect=function(e,t,n,r,i){var s=document.createElementNS(this.ns,"rect");s.setAttribute("x",e);s.setAttribute("y",t);s.setAttribute("width",n);s.setAttribute("height",r);return this.add(s,i)};this.simpleSVG.prototype.ellipse=function(e,t,n,r,i){var s=document.createElementNS(this.ns,"ellipse");s.setAttribute("cx",e);s.setAttribute("cy",t);s.setAttribute("rx",n);s.setAttribute("ry",r);return this.add(s,i)};this.simpleSVG.prototype.circle=function(e,t,n,r){return this.ellipse(e,t,n,n,r)};e.simpleSVG=this.simpleSVG})(window)